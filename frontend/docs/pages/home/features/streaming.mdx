import { Callout, Card, Cards, Steps, Tabs } from "nextra/components";

# Real-time Result Streaming in Hatchet

Hatchet offers real-time result streaming, which allows you to subscribe to workflow progress and relay individual step results from background workers to a frontend client. This enables you to provide real-time updates and progress to users as the workflow runs, enhancing the user experience and interactivity of your application.

<Tabs items={['Python', 'Typescript']}>
  <Tabs.Tab>

```python filename="resultStreaming.py" copy
import asyncio
from hatchet_sdk import Hatchet

async def main():
    hatchet = Hatchet(debug=True)

    workflow_run_id = await hatchet.admin.run_workflow("simple-workflow", {
        "test": "test",
    })

    listener = hatchet.listener.stream(workflow_run_id)

    print("listening for events")
    async for event in listener:
        print("event received", event)

    print("done listening for events")

if __name__ == "__main__":
    asyncio.run(main())

```

  </Tabs.Tab>
  <Tabs.Tab>

```typescript filename="resultStreaming.ts" copy
import Hatchet from "@hatchet-dev/typescript-sdk";

async function main() {
  const hatchet = Hatchet.init();

  const workflowRunId = await hatchet.admin.run_workflow("simple-workflow", {
    test: "test",
  });

  const listener = hatchet.listener.stream(workflowRunId);

  console.log("listening for events");

  for await (const event of listener) {
    console.log("event received", event);
  }

  console.log("done listening for events");
}

main()

```
  </Tabs.Tab>
</Tabs>

## How It Works

Real-time progress streaming in Hatchet works by leveraging the event stream functionality. When a workflow is triggered, Hatchet generates events for each step of the workflow, including the step's status, output, and any relevant metadata. These events are generated by the background workers executing the workflow steps. By subscribing to this event stream, you can capture these events in real-time and forward them to the frontend client.

Here's a high-level overview of how real-time progress streaming works:

1. The client triggers a workflow by sending a request to the backend API.
2. The backend API initiates the workflow using the Hatchet SDK and obtains a unique `workflowRunId`.
3. The backend API returns the `workflowRunId` to the client as a reference.
4. The client establishes a connection to a dedicated endpoint on the backend API, passing the `workflowRunId` as a parameter.
5. The backend API subscribes to the Hatchet event stream for the specified `workflowRunId`.
6. As the background workers execute the workflow steps, Hatchet generates events for each step, which are captured by the backend API through the event stream.
7. The backend API processes the events, extracts relevant information, and sends the data to the client in real-time using a streaming response.
8. The client receives the streamed data and updates the user interface accordingly, providing real-time progress updates.

If connection is lost (i.e. page reload or transient network failure), the client can reconnect to the same endpoint and resume receiving real-time updates by re-establishing the stream at step 4.

## Benefits of Real-time Progress Streaming

Real-time progress streaming offers several benefits:

1. **Enhanced User Experience**: By providing real-time updates, you can keep users informed about the progress of their requested tasks, making the application more engaging and interactive.

2. **Improved Responsiveness**: Users don't have to wait for the entire workflow to complete before seeing the results. They can receive partial results and updates as the workflow progresses, improving the perceived responsiveness of the application.

3. **Better Error Handling**: If an error occurs during the workflow execution, you can immediately notify the user through the real-time stream, allowing them to take appropriate action or retry the operation.

4. **Flexibility**: Real-time progress streaming allows you to customize the data sent to the client based on your application's requirements. You can filter, transform, and enrich the event data before sending it to the client.

By leveraging real-time progress streaming in Hatchet, you can create more dynamic and interactive applications that provide timely feedback and updates to users as workflows progress.



## Related Tutorials
- [Real-time Result Streaming with Hatchet and FastAPI](../tutorials/fastapi-react/result-streaming.mdx)

